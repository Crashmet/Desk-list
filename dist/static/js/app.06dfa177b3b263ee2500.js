webpackJsonp([0],{"3u+j":function(t,e){},"8d4Q":function(t,e){},D0ME:function(t,e){},KXBN:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),o=s("mvHQ"),r=s.n(o),a={name:"AddModalButton",props:{isShowModal:{type:Boolean}},computed:{btnText:function(){return this.isShowModal?"Отменить":"Добавить"}},methods:{handelShowModal:function(){this.$emit("handelShowModal",this.isShowModal)}}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"add-btn",on:{click:this.handelShowModal}},[this._v("\n  "+this._s(this.btnText)+"\n")])},staticRenderFns:[]};var l=s("VU/8")(a,i,!1,function(t){s("KXBN")},"data-v-5f1cfa0a",null).exports,h={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn",on:{click:this.handelShowHintBtn}},[this._v('\n  "?"\n')])},staticRenderFns:[]};var d=s("VU/8")({name:"ShowHintBtn",methods:{handelShowHintBtn:function(){this.$emit("handelShowHintBtn")}}},h,!1,function(t){s("Z+vT")},"data-v-79afbac1",null).exports,u=s("Z9LF"),c={name:"User",components:{Fragment:u.a},props:{user:{type:Object,default:function(){return{}}},depth:{type:Number}},computed:{isUserSubordinates:function(){return this.user.subordinates.length>0||this.depth>0},userName:function(){return this.user.marker+" "+this.user.name},indent:function(){return{"padding-left":40*this.depth+16+"px"}}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Fragment",[s("tr",[s("td",{style:t.indent},[s("div",{staticClass:"table-name"},[t.isUserSubordinates?s("span",{staticClass:"table-name__child"}):t._e(),t._v("\n        "+t._s(t.userName)+"\n      ")])]),t._v(" "),s("td",[s("span",{staticClass:"table-phone"},[t._v(t._s(t.user.phone))])])]),t._v(" "),t._l(t.user.subordinates,function(e){return s("User",{key:e.id,attrs:{user:e,depth:t.depth+1}})})],2)},staticRenderFns:[]};var m={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn",on:{click:this.handelResetSort}},[this._v("\n  Сбросить сортировку\n")])},staticRenderFns:[]};var f={name:"Table",components:{User:s("VU/8")(c,p,!1,function(t){s("i+AP")},"data-v-7ce7915f",null).exports,ResetSortButton:s("VU/8")({name:"ResetSortButton",methods:{handelResetSort:function(){this.$emit("handelResetSort")}}},m,!1,function(t){s("3u+j")},"data-v-76bedfac",null).exports},props:{users:{type:Array},isByUserNameDown:{type:Boolean},isByUserPhoneDown:{type:Boolean}},data:function(){return{chevronNameClass:"js-table-sort-neutral",chevronPhoneClass:"js-table-sort-neutral",parentKey:"parent"}},methods:{handelResetSort:function(){this.$emit("handelResetSort"),this.chevronPhoneClass="js-table-sort-neutral",this.chevronNameClass="js-table-sort-neutral"},sortByUserName:function(){this.$emit("sortByUserName",this.users)},sortByUserPhone:function(){this.$emit("sortByUserPhone",this.users)}},watch:{isByUserNameDown:function(){this.chevronNameClass=this.isByUserNameDown?"js-table-sort-down":"js-table-sort-up",this.chevronPhoneClass="js-table-sort-neutral"},isByUserPhoneDown:function(){this.chevronPhoneClass=this.isByUserPhoneDown?"js-table-sort-down":"js-table-sort-up",this.chevronNameClass="js-table-sort-neutral"},users:function(){this.parentKey=Math.random()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-table"},[s("reset-sort-button",{on:{handelResetSort:t.handelResetSort}}),t._v(" "),s("table",[s("tr",[s("th",{on:{click:t.sortByUserName}},[s("span",{staticClass:"table-title"},[t._v("Имя")]),t._v(" "),s("span",{class:t.chevronNameClass})]),t._v(" "),s("th",{on:{click:t.sortByUserPhone}},[s("span",{staticClass:"table-title"},[t._v("Телефон")]),t._v(" "),s("span",{class:t.chevronPhoneClass})])]),t._v(" "),s("tbody",{key:t.parentKey},t._l(t.users,function(t){return s("User",{key:t.id,attrs:{user:t,depth:0}})}),1)])],1)},staticRenderFns:[]};var _=s("VU/8")(f,v,!1,function(t){s("qpNG")},"data-v-c8c58f16",null).exports,b=s("kFye"),U={name:"Modal",props:{users:{type:Array}},data:function(){return{name:"",phone:"",chief:null,foundCheif:null,allUsers:[]}},created:function(){this.getAllUsers(this.users)},methods:{getAllUsers:function(t){this.allUsers=[],this.setAllUsers(t),this.sortAllUsersArr(this.allUsers)},sortAllUsersArr:function(t){t.sort(function(t,e){return t.marker.localeCompare(e.marker)})},setAllUsers:function(t){var e=this;t.map(function(t){return t.subordinates.length>0&&e.setAllUsers(t.subordinates),e.allUsers.push({marker:t.marker,name:t.name,id:t.id})})},handelCloseModal:function(){this.$emit("handelCloseModal")},addMarkerUser:function(){return null===this.chief?this.users.length+1+".":(this.searchChief(this.users),""+this.foundCheif.marker+(this.foundCheif.subordinates.length+1)+".")},searchChief:function(t){var e=this;t.forEach(function(t){if(e.chief.id===t.id)return e.foundCheif=t;t.subordinates.length>0&&e.searchChief(t.subordinates)})},handleFormSubmit:function(){var t={marker:this.addMarkerUser(),name:this.name,phone:this.phone,id:Object(b.a)(),chief:this.chief,subordinates:[]};this.$emit("addNewUser",t),this.name="",this.phone="",this.chief=null,this.getAllUsers(this.users)}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.handleFormSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form__header"},[s("h2",{staticClass:"form-header__title"},[t._v("Добавление пользователя")]),t._v(" "),s("button",{staticClass:"form-header__button",attrs:{type:"button"},on:{click:t.handelCloseModal}},[t._v("\n        X\n      ")])]),t._v(" "),s("div",[s("div",[s("label",{staticClass:"form__input_label"},[t._v("Имя")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form__input",attrs:{required:"",id:"name",type:"text",placeholder:"Введите имя"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),s("div",[s("label",{staticClass:"form__input_label"},[t._v("Телефон")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"form__input",attrs:{placeholder:"+7 999 123-45-67",id:"phone",required:"",type:"text"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),t.allUsers.length>0?s("div",[s("label",{staticClass:"form__input_label"},[t._v("Начальник")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.chief,expression:"chief"}],staticClass:"form__input",attrs:{name:"chief",id:"chief"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.chief=e.target.multiple?s:s[0]}}},[s("option",{domProps:{value:null}}),t._v(" "),t._l(t.allUsers,function(e){return s("option",{key:e.id,domProps:{value:e}},[t._v("\n            "+t._s(e.marker)+" "+t._s(e.name)+"\n          ")])})],2)]):t._e()]),t._v(" "),s("button",{staticClass:"form__button_add",attrs:{type:"submit"}},[t._v("\n      Сохранить\n    ")])])])},staticRenderFns:[]};var y=s("VU/8")(U,B,!1,function(t){s("D0ME")},"data-v-7630d444",null).exports,C={name:"TooltipAddBtn",props:{text:String},methods:{handleCloseTooltip:function(){this.$emit("handleCloseTooltip")}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tooltip-container"},[e("h1",[this._v("Руководство по управлению таблицей")]),this._v(" "),e("button",{staticClass:"close",on:{click:this.handleCloseTooltip}}),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('\n    "Кликните по этой '),e("span",{staticClass:"text__color_green"},[this._v("кнопке")]),this._v(' что бы\n    добавить нового пользователя"\n  ')])}]};var S=s("VU/8")(C,w,!1,function(t){s("rCsT")},"data-v-11f77446",null).exports,g={name:"TooltipSortButton",props:{text:String},methods:{handleCloseTooltip:function(){this.$emit("handleCloseTooltip")}}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tooltip-container"},[e("h1",[this._v("Руководство по управлению таблицей")]),this._v(" "),e("button",{staticClass:"close",on:{click:this.handleCloseTooltip}}),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v('\n    "Кликните по вверхней\n    '),e("span",{staticClass:"text__color_purple"},[this._v("фиолетовой")]),this._v(' кнопке чтобы сбросить\n    сортировку."\n    '),e("br"),this._v('\n    "Кликайте по '),e("span",{staticClass:"text__color_green"},[this._v("зеленым")]),this._v(' кнопкам чтобы\n    отсортировать список"\n  ')])}]};var P={name:"App",components:{AddModalButton:l,ShowHintBtn:d,Table:_,Modal:y,TooltipAddButton:S,TooltipSortButton:s("VU/8")(g,N,!1,function(t){s("SrlY")},"data-v-d0c80992",null).exports},data:function(){return{isShowModal:!1,isByUserNameDown:!1,isByUserPhoneDown:!1,isTooltipAddBtnAdded:!1,isTooltipSortBtnAdded:!1,dataUsers:[]}},created:function(){var t=localStorage.getItem("users-list");t&&(this.dataUsers=JSON.parse(t))},methods:{handleCloseTooltip:function(t){this[t]=!1},handelShowHintBtn:function(){this.isTooltipAddBtnAdded=!0,this.isTooltipSortBtnAdded=!0},handelResetSort:function(){this.resetSort(this.dataUsers),this.updateLocalStorage()},resetSort:function(t){var e=this;1!==t.length?t.sort(function(t,s){return t.subordinates.length>0&&e.resetSort(t.subordinates),s.subordinates.length>0&&e.resetSort(s.subordinates),t.marker.localeCompare(s.marker)}):t[0].subordinates.length>0&&this.resetSort(t[0].subordinates)},sortByUserName:function(t){this.isByUserNameDown=!this.isByUserNameDown,this.isByUserNameDown?this.sortByUserNameDown(t):this.sortByUserNameUp(t)},sortByUserNameDown:function(t){var e=this;1!==t.length?t.sort(function(t,s){return t.subordinates.length>0&&e.sortByUserNameDown(t.subordinates),s.subordinates.length>0&&e.sortByUserNameDown(s.subordinates),t.name.localeCompare(s.name)}):t[0].subordinates.length>0&&this.sortByUserNameDown(t[0].subordinates)},sortByUserNameUp:function(t){var e=this;1!==t.length?t.sort(function(t,s){return t.subordinates.length>0&&e.sortByUserNameUp(t.subordinates),s.subordinates.length>0&&e.sortByUserNameUp(s.subordinates),s.name.localeCompare(t.name)}):t[0].subordinates.length>0&&this.sortByUserNameUp(t[0].subordinates)},sortByUserPhone:function(t){this.isByUserPhoneDown=!this.isByUserPhoneDown,this.isByUserPhoneDown?this.sortByUserPhoneDown(t):this.sortByUserPhoneUp(t)},sortByUserPhoneDown:function(t){var e=this;1!==t.length?t.sort(function(t,s){return t.subordinates.length>0&&e.sortByUserPhoneDown(t.subordinates),s.subordinates.length>0&&e.sortByUserPhoneDown(s.subordinates),t.phone.localeCompare(s.phone)}):t[0].subordinates.length>0&&this.sortByUserPhoneDown(t[0].subordinates)},sortByUserPhoneUp:function(t){var e=this;1!==t.length?t.sort(function(t,s){return t.subordinates.length>0&&e.sortByUserPhoneUp(t.subordinates),s.subordinates.length>0&&e.sortByUserPhoneUp(s.subordinates),s.phone.localeCompare(t.phone)}):t[0].subordinates.length>0&&this.sortByUserPhoneUp(t[0].subordinates)},handelShowModal:function(){this.isShowModal=!this.isShowModal},addNewUser:function(t){null===t.chief?(this.dataUsers.push(t),this.updateLocalStorage()):this.addNewSubordinates(this.dataUsers,t)},addNewSubordinates:function(t,e){var s=this;t.forEach(function(t){t.name!==e.chief.name||t.id!==e.chief.id?t.subordinates.length>0&&s.addNewSubordinates(t.subordinates,e):t.subordinates.push(e)}),this.updateLocalStorage()},updateLocalStorage:function(){localStorage.setItem("users-list",r()(this.dataUsers))}}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"app"}},[s("div",{staticClass:"header"},[s("h1",{staticClass:"header-title"},[t._v("Список")]),t._v(" "),s("show-hint-btn",{on:{handelShowHintBtn:t.handelShowHintBtn}})],1),t._v(" "),s("div",{staticClass:"add-modal__btn"},[s("add-modal-button",{attrs:{isShowModal:t.isShowModal},on:{handelShowModal:t.handelShowModal}}),t._v(" "),t.isTooltipAddBtnAdded?s("div",[s("tooltip-add-button",{on:{handleCloseTooltip:function(e){return t.handleCloseTooltip("isTooltipAddBtnAdded")}}})],1):t._e()],1),t._v(" "),t.isShowModal?s("Modal",{attrs:{users:t.dataUsers},on:{addNewUser:t.addNewUser,handelCloseModal:function(e){t.isShowModal=!1}}}):t._e(),t._v(" "),s("div",{staticClass:"table"},[t.isTooltipSortBtnAdded?s("div",[s("tooltip-sort-button",{on:{handleCloseTooltip:function(e){return t.handleCloseTooltip("isTooltipSortBtnAdded")}}})],1):t._e(),t._v(" "),s("Table",{attrs:{users:t.dataUsers,isByUserNameDown:t.isByUserNameDown,isByUserPhoneDown:t.isByUserPhoneDown},on:{sortByUserName:t.sortByUserName,sortByUserPhone:t.sortByUserPhone,handelResetSort:t.handelResetSort}})],1)],1)},staticRenderFns:[]};var T=s("VU/8")(P,A,!1,function(t){s("8d4Q")},null,null).exports;n.a.use(u.b.Plugin),n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:T},template:"<App/>"})},SrlY:function(t,e){},"Z+vT":function(t,e){},"i+AP":function(t,e){},qpNG:function(t,e){},rCsT:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.06dfa177b3b263ee2500.js.map